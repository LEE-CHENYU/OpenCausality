# Agent Permissions: File access per agent per mode
#
# Agents can only read/write to the paths listed for their current mode.
# This prevents design shopping, p-hacking via code changes, and
# ensures separation between exploration and confirmation.

SIMULATION:
  DAGScout:
    read: ["config/", "specs/"]
    write: []
  PaperScout:
    read: ["config/"]
    write: []
  DataScout:
    read: ["config/"]
    write: ["data/metadata/"]
  ModelSmith:
    read: ["config/", "data/"]
    write: []
  Estimator:
    read: ["*"]
    write: ["outputs/simulation/"]
  Judge:
    read: ["outputs/"]
    write: ["outputs/simulation/"]
  PatchBot:
    read: []
    write: []  # No patches in simulation

EXPLORATION:
  DAGScout:
    read: ["*"]
    write: ["specs/candidates/"]
  PaperScout:
    read: ["*"]
    write: ["specs/candidates/citations/"]
  DataScout:
    read: ["*"]
    write: ["data/candidates/", "data/metadata/"]
    # NOT data/raw/ -- quarantined until promoted
  ModelSmith:
    read: ["*"]
    write: ["specs/candidates/design_additions.yaml"]
    # NOT canonical registry
  ModelSmithCritic:
    read: ["*"]
    write: ["outputs/agentic/issues/"]
  Estimator:
    read: ["*"]
    write: ["outputs/exploration/"]
  Interpreter:
    read: ["*"]
    write: ["outputs/exploration/edge_cards/"]
  Judge:
    read: ["*"]
    write: ["outputs/exploration/", "outputs/agentic/issues/"]
  PatchBot:
    read: ["*"]
    write: ["shared/", "config/"]
    # Whitelist only, not canonical registries
  TSGuard:
    read: ["*"]
    write: ["outputs/agentic/issues/"]
  # NOTE: Canonical locations (config/agentic/design_registry.yaml, data/raw/)
  # are read-only. Candidates written to specs/candidates/ and data/candidates/
  # require HITL promotion.

CONFIRMATION:
  DAGScout:
    read: ["*"]
    write: []  # Read-only
  DataScout:
    read: ["*"]
    write: []  # Read-only
  ModelSmith:
    read: ["*"]
    write: []  # Frozen design
  Estimator:
    read: ["*"]
    write: ["outputs/confirmation/"]
  Interpreter:
    read: ["*"]
    write: ["outputs/confirmation/edge_cards/"]
  Judge:
    read: ["*"]
    write: ["outputs/confirmation/", "outputs/agentic/issues/"]
  PatchBot:
    read: []
    write: []  # No patches in confirmation
  # Report-deterministic fixes (N alignment) are handled by the report generator,
  # not PatchBot.

  # CONFIRMATION requires a freeze manifest:
  freeze_manifest:
    required_hashes: ["dag_hash", "design_assignments_hash", "data_hash"]
    sample_windows:
      exploration_sample:
        start: "config"
        end: "config"
      confirmation_sample:
        start: "config"
        end: "config"
      overlap_policy: "FORBIDDEN"
      # exploration and confirmation samples must not overlap for TS edges
    holdout_rule: |
      For time-series edges: confirmation runs on a pre-specified holdout window
      not used during exploration refinement. For panel edges: leave-one-period-out
      or rolling-window evaluation acceptable.
    edgecard_fields_required: ["spec_hash", "data_hash", "sample_window"]
