schema_version: 2
metadata:
  name: kspi_k2_stress_narrative
  description: DAG generated from narrative text, based on kspi_k2_stress. Contains
    13 edges (4 matched, 9 new).
  target_node: k2_ratio_kspi
  created: '2026-02-07'
  owner: narrative_pipeline
  tags:
  - narrative
  - auto-generated
nodes:
- id: cor_kspi
  name: KSPI cost of risk
  description: Kaspi.kz cost of risk (annualized provisions / avg loans).
  unit: pct
  frequency: quarterly
  type: continuous
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 2
    lag_unit: month
  source:
    preferred:
    - connector: kspi_quarterly
      dataset: credit_quality
      series: cor
      notes: From IR quarterly PDFs
    fallback: []
  aggregation:
    method: average
    seasonal_adjust: false
    deflator: null
    deflator_timing: same
  role_constraints:
    never_control: false
    never_instrument: false
  tags:
  - credit_quality
  - kspi
  - provisioning
- id: cpi_nontradable
  name: Non-tradable CPI
  description: CPI for non-tradable goods (services). Block A falsification.
  unit: log
  frequency: monthly
  type: index
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 1
    lag_unit: month
  source:
    preferred:
    - connector: bns
      dataset: prices
      series: cpi_nontradable
    fallback: []
  transforms:
  - log
  aggregation:
    method: end_of_period
    seasonal_adjust: true
    deflator: null
    deflator_timing: same
  role_constraints:
    never_control: false
    never_instrument: false
  validated_evidence:
    block_id: block_a_fx_passthrough_falsification
    description: Near-zero FX pass-through to non-tradable CPI
    immutable: true
  tags:
  - prices
  - inflation
  - block_a
  - falsification
- id: cpi_tradable
  name: Tradable CPI
  description: CPI for tradable goods (import-weighted). Block A validated.
  unit: log
  frequency: monthly
  type: index
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 1
    lag_unit: month
  source:
    preferred:
    - connector: bns
      dataset: prices
      series: cpi_tradable
    fallback: []
  transforms:
  - log
  aggregation:
    method: end_of_period
    seasonal_adjust: true
    deflator: null
    deflator_timing: same
  role_constraints:
    never_control: false
    never_instrument: false
  validated_evidence:
    block_id: block_a_fx_passthrough
    description: 11.3% FX pass-through to tradable CPI
    immutable: true
  tags:
  - prices
  - inflation
  - block_a
- id: deposit_cost_kspi
  name: KSPI deposit cost
  description: Kaspi.kz average deposit rate.
  unit: pct
  frequency: quarterly
  type: continuous
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 2
    lag_unit: month
  source:
    preferred:
    - connector: kspi_quarterly
      dataset: income_statement
      series: deposit_rate
      notes: Implied from interest expense / avg deposits
    fallback: []
  aggregation:
    method: average
    seasonal_adjust: false
    deflator: null
    deflator_timing: same
  role_constraints:
    never_control: false
    never_instrument: false
  tags:
  - balance_sheet
  - kspi
  - funding
- id: imported_inflation_instrument
  name: Imported inflation IV
  description: Constructed instrument for imported inflation (FX change × pre-period
    import share).
  unit: pct
  frequency: monthly
  type: continuous
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 1
    lag_unit: month
  derived: true
  role_constraints:
    never_control: true
    never_instrument: false
  tags:
  - instrument
  - inflation
- id: kzt_usd
  name: KZT/USD exchange rate
  description: Kazakh tenge per US dollar, log level.
  unit: log
  frequency: daily
  type: continuous
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 0
    lag_unit: day
  source:
    preferred:
    - connector: nbk
      dataset: exchange_rates
      series: kzt_usd
    fallback:
    - connector: fred
      dataset: exchange_rates
      series: DEXKZUS
  transforms:
  - log
  aggregation:
    method: end_of_period
    seasonal_adjust: false
    deflator: null
    deflator_timing: same
  role_constraints:
    never_control: false
    never_instrument: false
  tags:
  - fx
  - transmission
- id: loan_portfolio_kspi
  name: KSPI net loan portfolio
  description: Kaspi.kz net loan portfolio level (bn KZT).
  unit: log
  frequency: quarterly
  type: continuous
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 2
    lag_unit: month
  source:
    preferred:
    - connector: kspi_quarterly
      dataset: balance_sheet
      series: net_loans
      notes: From IR quarterly PDFs
    fallback: []
  transforms:
  - log
  aggregation:
    method: end_of_period
    seasonal_adjust: false
    deflator: null
    deflator_timing: same
  role_constraints:
    never_control: false
    never_instrument: false
  tags:
  - balance_sheet
  - kspi
- id: nbk_policy_rate
  name: NBK base rate
  description: National Bank of Kazakhstan policy rate.
  unit: pct
  frequency: event
  type: continuous
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 0
    lag_unit: day
  source:
    preferred:
    - connector: nbk_policy_rate
      dataset: base_rate
      series: rate
      notes: Requires nbk_policy_rate connector
    fallback: []
  aggregation:
    method: end_of_period
    seasonal_adjust: false
    deflator: null
    deflator_timing: same
  role_constraints:
    never_control: false
    never_instrument: true
  tags:
  - monetary_policy
  - transmission
- id: net_interest_margin_kspi
  name: Net interest margin (Kaspi)
  description: 'Net interest margin: net interest income divided by average interest-earning
    assets (or average loans, depending on definition). Measures profitability of
    intermediation net of funding costs.'
  unit: percent
  frequency: quarterly
  type: share
  observed: true
  latent: false
  tags:
  - narrative_generated
- id: npl_kspi
  name: KSPI NPL ratio
  description: Kaspi.kz non-performing loan ratio.
  unit: pct
  frequency: quarterly
  type: share
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 2
    lag_unit: month
  source:
    preferred:
    - connector: kspi_quarterly
      dataset: credit_quality
      series: npl_ratio
      notes: From IR quarterly PDFs
    fallback: []
  aggregation:
    method: end_of_period
    seasonal_adjust: false
    deflator: null
    deflator_timing: same
  role_constraints:
    never_control: false
    never_instrument: false
  tags:
  - credit_quality
  - kspi
- id: payments_revenue_kspi
  name: KSPI Payments revenue
  description: Kaspi.kz payments segment revenue.
  unit: log
  frequency: quarterly
  type: continuous
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 2
    lag_unit: month
  source:
    preferred:
    - connector: kspi_quarterly
      dataset: segment
      series: payments_revenue
    fallback: []
  transforms:
  - log
  aggregation:
    method: sum
    seasonal_adjust: false
    deflator: null
    deflator_timing: same
  role_constraints:
    never_control: false
    never_instrument: false
  tags:
  - segment
  - kspi
- id: ppop_kspi
  name: KSPI pre-provision operating profit
  description: Kaspi.kz PPOP (revenue - opex, before provisions).
  unit: log
  frequency: quarterly
  type: continuous
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 2
    lag_unit: month
  source:
    preferred:
    - connector: kspi_quarterly
      dataset: income_statement
      series: ppop
      notes: From IR quarterly PDFs
    fallback: []
  transforms:
  - log
  aggregation:
    method: sum
    seasonal_adjust: false
    deflator: null
    deflator_timing: same
  role_constraints:
    never_control: false
    never_instrument: false
  tags:
  - income_statement
  - kspi
- id: real_expenditure
  name: Real consumption expenditure
  description: Nominal expenditure deflated by CPI. Block F validated.
  unit: log
  frequency: quarterly
  type: continuous
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 1
    lag_unit: quarter
  derived: true
  role_constraints:
    never_control: false
    never_instrument: false
  validated_evidence:
    block_id: block_f_real_expenditure
    description: IRF(0) = -0.10 for real expenditure response to FX
    immutable: true
  tags:
  - household
  - expenditure
  - block_f
- id: real_income
  name: Real monetary income
  description: Nominal income deflated by CPI. Identity node.
  unit: log
  frequency: quarterly
  type: continuous
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 1
    lag_unit: quarter
  derived: true
  role_constraints:
    never_control: false
    never_instrument: false
  tags:
  - household
  - income
- id: rwa_kspi
  name: KSPI risk-weighted assets
  description: Kaspi.kz risk-weighted assets for regulatory capital.
  unit: log
  frequency: quarterly
  type: continuous
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 2
    lag_unit: month
  source:
    preferred:
    - connector: kspi_quarterly
      dataset: capital
      series: rwa
      notes: May require 20-F for NBK figures
    fallback: []
  transforms:
  - log
  aggregation:
    method: end_of_period
    seasonal_adjust: false
    deflator: null
    deflator_timing: same
  role_constraints:
    never_control: false
    never_instrument: false
  tags:
  - capital
  - kspi
- id: total_capital_kspi
  name: KSPI total capital
  description: Kaspi.kz total regulatory capital (Tier 1 + Tier 2).
  unit: log
  frequency: quarterly
  type: continuous
  observed: true
  latent: false
  scope: kazakhstan_only
  release_lag:
    periods: 2
    lag_unit: month
  source:
    preferred:
    - connector: kspi_quarterly
      dataset: capital
      series: total_capital
      notes: May require 20-F for NBK figures
    fallback: []
  transforms:
  - log
  aggregation:
    method: end_of_period
    seasonal_adjust: false
    deflator: null
    deflator_timing: same
  role_constraints:
    never_control: false
    never_instrument: false
  tags:
  - capital
  - kspi
- id: vix_shock
  name: VIX shock
  description: Innovation in VIX (risk aversion shock).
  unit: innovation
  frequency: daily
  type: continuous
  observed: true
  latent: false
  scope: global
  release_lag:
    periods: 0
    lag_unit: day
  source:
    preferred:
    - connector: fred
      dataset: financial
      series: VIXCLS
    fallback: []
  transforms:
  - innovation
  - aggregate_mean_to_month
  aggregation:
    method: average
    seasonal_adjust: false
    deflator: null
    deflator_timing: same
  role_constraints:
    never_control: true
    never_instrument: false
  tags:
  - financial
  - shock
  - exogenous
edges:
- id: fx_to_cpi_tradable
  from: kzt_usd
  to: cpi_tradable
  timing:
    lag: 1
    lag_unit: month
    contemporaneous: false
    max_anticipation: 0
  estimand:
    type: elasticity
    horizon:
    - 0
    - 1
    - 2
    - 3
    - 6
    scale: log
  allowed_designs:
  - LOCAL_PROJECTIONS
  - PANEL_FE_BACKDOOR
  design_priority:
  - LOCAL_PROJECTIONS
  diagnostics_required:
  - pre_trends
  - placebo
  - stability
  acceptance_criteria:
    diagnostics:
      pretrend_p_min: 0.1
      first_stage_f_min: 10.0
      placebo_p_min: 0.1
      density_p_min: 0.1
    data:
      max_missing_rate: 0.05
      min_obs: 80
      min_pre_periods: 12
    plausibility:
      expected_sign: positive
      magnitude_range:
      - 0.05
      - 0.25
    stability:
      regime_split_date: 2015-08
      max_coefficient_change: 0.5
    null_acceptance:
      enabled: true
      equivalence_bound: 0.03
  interpretation:
    is: Differential inflation response by import intensity
    is_not:
    - Full pass-through including indirect effects
    - Policy counterfactual
    allowed_uses:
    - shock_counterfactual
    - scenario_only
    forbidden_uses:
    - policy_counterfactual
  validated_evidence:
    block_id: block_a_fx_passthrough
    description: ''
    immutable: true
    estimate: 0.113
  edge_status: IMMUTABLE
  edge_type: immutable
  notes: 'Block A validated result: 11.3% FX pass-through to tradable CPI.'
- id: fx_to_cpi_nontradable
  from: kzt_usd
  to: cpi_nontradable
  timing:
    lag: 1
    lag_unit: month
    contemporaneous: false
    max_anticipation: 0
  estimand:
    type: elasticity
    horizon:
    - 0
    - 1
    - 2
    - 3
    - 6
    scale: log
  allowed_designs:
  - LOCAL_PROJECTIONS
  - PANEL_FE_BACKDOOR
  design_priority:
  - LOCAL_PROJECTIONS
  diagnostics_required:
  - pre_trends
  - placebo
  - stability
  acceptance_criteria:
    diagnostics:
      pretrend_p_min: 0.1
      first_stage_f_min: 10.0
      placebo_p_min: 0.1
      density_p_min: 0.1
    data:
      max_missing_rate: 0.05
      min_obs: 80
      min_pre_periods: 12
    plausibility:
      expected_sign: any
      magnitude_range:
      - -0.05
      - 0.1
    stability:
      regime_split_date: null
      max_coefficient_change: 0.5
    null_acceptance:
      enabled: true
      equivalence_bound: 0.05
  interpretation:
    is: Falsification test for FX pass-through
    is_not:
    - Primary transmission channel
    allowed_uses:
    - falsification_evidence
    forbidden_uses:
    - shock_counterfactual
    - policy_counterfactual
  validated_evidence:
    block_id: block_a_fx_passthrough_falsification
    description: ''
    immutable: true
    estimate: 0.0
  edge_status: IMMUTABLE
  edge_type: immutable
  notes: 'Block A falsification: Near-zero pass-through to non-tradable CPI.'
- id: cpi_tradable_to_nbk_policy_rate
  from: cpi_tradable
  to: nbk_policy_rate
  timing:
    lag: 1
    lag_unit: month
    contemporaneous: false
    max_anticipation: 0
  estimand:
    type: elasticity
    horizon: 0
    scale: level
  allowed_designs:
  - LOCAL_PROJECTIONS
  acceptance_criteria:
    diagnostics:
      pretrend_p_min: 0.1
      first_stage_f_min: 10.0
      placebo_p_min: 0.1
      density_p_min: 0.1
    data:
      max_missing_rate: 0.05
      min_obs: 50
      min_pre_periods: 4
    plausibility:
      expected_sign: any
    stability:
      regime_split_date: null
      max_coefficient_change: 0.5
    null_acceptance:
      enabled: true
      equivalence_bound: 0.1
  edge_type: reaction_function
  notes: 'NL-implied: Inflation reaction function for NBK policy rate.'
- id: kzt_usd_to_real_income_neg_via_imported_inflation
  from: kzt_usd
  to: real_income
  timing:
    lag: 1
    lag_unit: quarter
    contemporaneous: false
    max_anticipation: 0
  estimand:
    type: elasticity
    horizon: 0
    scale: level
  allowed_designs:
  - PANEL_FE_BACKDOOR
  acceptance_criteria:
    diagnostics:
      pretrend_p_min: 0.1
      first_stage_f_min: 10.0
      placebo_p_min: 0.1
      density_p_min: 0.1
    data:
      max_missing_rate: 0.05
      min_obs: 50
      min_pre_periods: 4
    plausibility:
      expected_sign: any
    stability:
      regime_split_date: null
      max_coefficient_change: 0.5
    null_acceptance:
      enabled: true
      equivalence_bound: 0.1
  edge_type: causal
  notes: 'NL-extracted: Exchange rate depreciation / imported inflation->Households''
    purchasing power (negative)'
- id: imported_inflation_instrument__to__real_income
  from: imported_inflation_instrument
  to: real_income
  timing:
    lag: 1
    lag_unit: quarter
    contemporaneous: false
    max_anticipation: 0
  estimand:
    type: elasticity
    horizon: 0
    scale: level
  allowed_designs:
  - PANEL_FE_BACKDOOR
  acceptance_criteria:
    diagnostics:
      pretrend_p_min: 0.1
      first_stage_f_min: 10.0
      placebo_p_min: 0.1
      density_p_min: 0.1
    data:
      max_missing_rate: 0.05
      min_obs: 50
      min_pre_periods: 4
    plausibility:
      expected_sign: any
    stability:
      regime_split_date: null
      max_coefficient_change: 0.5
    null_acceptance:
      enabled: true
      equivalence_bound: 0.1
  edge_type: causal
  notes: 'NL-extracted: Imported inflation (price increases) with slow wage adjustment->Real
    disposable income (negative)'
- id: cpi_tradable->real_expenditure
  from: cpi_tradable
  to: real_expenditure
  timing:
    lag: 1
    lag_unit: quarter
    contemporaneous: false
    max_anticipation: 0
  estimand:
    type: elasticity
    horizon: 0
    scale: level
  allowed_designs:
  - PANEL_FE_BACKDOOR
  acceptance_criteria:
    diagnostics:
      pretrend_p_min: 0.1
      first_stage_f_min: 10.0
      placebo_p_min: 0.1
      density_p_min: 0.1
    data:
      max_missing_rate: 0.05
      min_obs: 50
      min_pre_periods: 4
    plausibility:
      expected_sign: any
    stability:
      regime_split_date: null
      max_coefficient_change: 0.5
    null_acceptance:
      enabled: true
      equivalence_bound: 0.1
  edge_type: causal
  notes: 'NL-extracted: Imported inflation (price increases) with slow wage adjustment->Real
    household spending (real consumption) (negative)'
- id: real_income_to_npl_kspi
  from: real_income
  to: npl_kspi
  timing:
    lag: 1
    lag_unit: quarter
    contemporaneous: false
    max_anticipation: 0
  estimand:
    type: elasticity
    horizon: 0
    scale: level
  allowed_designs:
  - PANEL_FE_BACKDOOR
  acceptance_criteria:
    diagnostics:
      pretrend_p_min: 0.1
      first_stage_f_min: 10.0
      placebo_p_min: 0.1
      density_p_min: 0.1
    data:
      max_missing_rate: 0.05
      min_obs: 50
      min_pre_periods: 4
    plausibility:
      expected_sign: any
    stability:
      regime_split_date: null
      max_coefficient_change: 0.5
    null_acceptance:
      enabled: true
      equivalence_bound: 0.1
  edge_type: causal
  notes: 'NL-extracted: Household purchasing-power squeeze (from imported inflation)->Loan
    repayment stress at Kaspi (delinquencies) (positive)'
- id: real_income->cor_kspi
  from: real_income
  to: cor_kspi
  timing:
    lag: 1
    lag_unit: quarter
    contemporaneous: false
    max_anticipation: 0
  estimand:
    type: elasticity
    horizon: 0
    scale: level
  allowed_designs:
  - PANEL_FE_BACKDOOR
  acceptance_criteria:
    diagnostics:
      pretrend_p_min: 0.1
      first_stage_f_min: 10.0
      placebo_p_min: 0.1
      density_p_min: 0.1
    data:
      max_missing_rate: 0.05
      min_obs: 50
      min_pre_periods: 4
    plausibility:
      expected_sign: any
    stability:
      regime_split_date: null
      max_coefficient_change: 0.5
    null_acceptance:
      enabled: true
      equivalence_bound: 0.1
  edge_type: causal
  notes: 'NL-extracted: Household purchasing-power squeeze (from imported inflation)->Credit
    loss provisions at Kaspi (positive)'
- id: vix_shock_to_deposit_cost_kspi
  from: vix_shock
  to: deposit_cost_kspi
  timing:
    lag: 1
    lag_unit: quarter
    contemporaneous: false
    max_anticipation: 0
  estimand:
    type: elasticity
    horizon: 0
    scale: level
  allowed_designs:
  - PANEL_FE_BACKDOOR
  acceptance_criteria:
    diagnostics:
      pretrend_p_min: 0.1
      first_stage_f_min: 10.0
      placebo_p_min: 0.1
      density_p_min: 0.1
    data:
      max_missing_rate: 0.05
      min_obs: 50
      min_pre_periods: 4
    plausibility:
      expected_sign: any
    stability:
      regime_split_date: null
      max_coefficient_change: 0.5
    null_acceptance:
      enabled: true
      equivalence_bound: 0.1
  edge_type: causal
  notes: 'NL-extracted: Tighter financial conditions->Kaspi funding costs (positive)'
- id: nbk_policy_rate->net_interest_margin_kspi
  from: nbk_policy_rate
  to: net_interest_margin_kspi
  timing:
    lag: 1
    lag_unit: quarter
    contemporaneous: false
    max_anticipation: 0
  estimand:
    type: elasticity
    horizon: 0
    scale: level
  allowed_designs:
  - PANEL_FE_BACKDOOR
  acceptance_criteria:
    diagnostics:
      pretrend_p_min: 0.1
      first_stage_f_min: 10.0
      placebo_p_min: 0.1
      density_p_min: 0.1
    data:
      max_missing_rate: 0.05
      min_obs: 50
      min_pre_periods: 4
    plausibility:
      expected_sign: any
    stability:
      regime_split_date: null
      max_coefficient_change: 0.5
    null_acceptance:
      enabled: true
      equivalence_bound: 0.1
  edge_type: causal
  notes: 'NL-extracted: Tighter financial conditions->Kaspi net interest margins (margins)
    (negative)'
- id: vix_shock__to__cor_kspi
  from: vix_shock
  to: cor_kspi
  timing:
    lag: 1
    lag_unit: quarter
    contemporaneous: false
    max_anticipation: 0
  estimand:
    type: elasticity
    horizon: 0
    scale: level
  allowed_designs:
  - PANEL_FE_BACKDOOR
  acceptance_criteria:
    diagnostics:
      pretrend_p_min: 0.1
      first_stage_f_min: 10.0
      placebo_p_min: 0.1
      density_p_min: 0.1
    data:
      max_missing_rate: 0.05
      min_obs: 50
      min_pre_periods: 4
    plausibility:
      expected_sign: any
    stability:
      regime_split_date: null
      max_coefficient_change: 0.5
    null_acceptance:
      enabled: true
      equivalence_bound: 0.1
  edge_type: causal
  notes: 'NL-extracted: Tighter financial conditions and/or macro stress signals->Macro
    provisioning (forward-looking provisioning) at Kaspi (positive)'
- id: ppop_kspi_and_provisions_expense_kspi_to_total_capital_kspi
  from: ppop_kspi
  to: total_capital_kspi
  timing:
    lag: 1
    lag_unit: quarter
    contemporaneous: false
    max_anticipation: 0
  estimand:
    type: elasticity
    horizon: 0
    scale: level
  allowed_designs:
  - PANEL_FE_BACKDOOR
  acceptance_criteria:
    diagnostics:
      pretrend_p_min: 0.1
      first_stage_f_min: 10.0
      placebo_p_min: 0.1
      density_p_min: 0.1
    data:
      max_missing_rate: 0.05
      min_obs: 50
      min_pre_periods: 4
    plausibility:
      expected_sign: any
    stability:
      regime_split_date: null
      max_coefficient_change: 0.5
    null_acceptance:
      enabled: true
      equivalence_bound: 0.1
  edge_type: mechanical
  notes: 'NL-extracted: Changes in profits and provisions->Kaspi capital headroom
    (capital numerator) (negative)'
- id: loan_portfolio_to_rwa
  from: loan_portfolio_kspi
  to: rwa_kspi
  timing:
    lag: 0
    lag_unit: quarter
    contemporaneous: true
    max_anticipation: 0
  estimand:
    type: elasticity
    horizon:
    - 0
    scale: log
  allowed_designs:
  - LOCAL_PROJECTIONS
  design_priority:
  - LOCAL_PROJECTIONS
  acceptance_criteria:
    diagnostics:
      pretrend_p_min: 0.1
      first_stage_f_min: 10.0
      placebo_p_min: 0.1
      density_p_min: 0.1
    data:
      max_missing_rate: 0.1
      min_obs: 20
      min_pre_periods: 4
    plausibility:
      expected_sign: positive
      magnitude_range:
      - 0.5
      - 1.5
    stability:
      regime_split_date: null
      max_coefficient_change: 0.5
    null_acceptance:
      enabled: false
      equivalence_bound: 0.1
  interpretation:
    is: Mechanical volume effect on RWA
    is_not:
    - Risk-weight changes
    allowed_uses:
    - scenario_only
  edge_status: NEEDS_CONNECTOR
  edge_type: mechanical
  notes: Volume × avg RW. Mechanical relationship.
- id: expenditure_to_payments_revenue
  from: real_expenditure
  to: payments_revenue_kspi
  timing:
    lag: 0
    lag_unit: quarter
    contemporaneous: true
    max_anticipation: 0
  estimand:
    type: elasticity
    horizon:
    - 0
    - 1
    - 2
    scale: log
  allowed_designs:
  - LOCAL_PROJECTIONS
  design_priority:
  - LOCAL_PROJECTIONS
  diagnostics_required:
  - stability
  acceptance_criteria:
    diagnostics:
      pretrend_p_min: 0.1
      first_stage_f_min: 10.0
      placebo_p_min: 0.1
      density_p_min: 0.1
    data:
      max_missing_rate: 0.1
      min_obs: 20
      min_pre_periods: 4
    plausibility:
      expected_sign: positive
      magnitude_range:
      - 0.0
      - 2.0
    stability:
      regime_split_date: null
      max_coefficient_change: 0.5
    null_acceptance:
      enabled: true
      equivalence_bound: 0.1
  interpretation:
    is: Association between spending and KSPI payments revenue
    is_not:
    - Causal effect without confounding
    - KSPI market share dynamics
    allowed_uses:
    - scenario_only
    forbidden_uses:
    - shock_counterfactual
    - policy_counterfactual
  edge_status: NEEDS_CONNECTOR
  edge_type: causal
  notes: Spending -> GMV -> Interchange -> Revenue. Requires KSPI connector.
assumptions: []
latents: []
